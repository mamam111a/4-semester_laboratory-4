{"ast":null,"code":"var _jsxFileName = \"/home/mamamia/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/lab4/lab4react/src/pages/RoleDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport api from '../api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RoleDetail = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [role, setRole] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editedRole, setEditedRole] = useState({});\n  useEffect(() => {\n    api.get(`/roles/${id}`).then(res => {\n      setRole(res.data);\n      setEditedRole(res.data);\n    }).catch(() => {\n      alert('Ошибка загрузки');\n      navigate('/roles');\n    });\n  }, [id, navigate]);\n  const handleUpdate = async () => {\n    try {\n      await api.put(`/roles/${id}`, editedRole);\n      alert('Обновлено');\n      setIsEditing(false);\n    } catch {\n      alert('Ошибка обновления');\n    }\n  };\n  const handleDelete = async () => {\n    if (window.confirm('Удалить эту роль?')) {\n      try {\n        await api.delete(`/roles/${id}`);\n        navigate('/roles');\n      } catch {\n        alert('Ошибка удаления');\n      }\n    }\n  };\n  if (!role) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: '20px auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\u0420\\u043E\\u043B\\u044C: \", role.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: editedRole.name,\n        onChange: e => setEditedRole({\n          ...editedRole,\n          name: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpdate,\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsEditing(false),\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 14\n        }, this), \" \", role.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsEditing(true),\n        children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        style: {\n          marginLeft: 10,\n          color: 'red'\n        },\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate('/roles'),\n      children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(RoleDetail, \"OlcMwE+42cl19qPXZ/JUIpbYL/E=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = RoleDetail;\nexport default RoleDetail;\nvar _c;\n$RefreshReg$(_c, \"RoleDetail\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","api","jsxDEV","_jsxDEV","Fragment","_Fragment","RoleDetail","_s","id","navigate","role","setRole","isEditing","setIsEditing","editedRole","setEditedRole","get","then","res","data","catch","alert","handleUpdate","put","handleDelete","window","confirm","delete","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","name","value","onChange","e","target","onClick","marginLeft","color","_c","$RefreshReg$"],"sources":["/home/mamamia/Рабочий стол/lab4/lab4react/src/pages/RoleDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport api from '../api'\n\nconst RoleDetail = () => {\n  const { id } = useParams()\n  const navigate = useNavigate()\n  const [role, setRole] = useState(null)\n  const [isEditing, setIsEditing] = useState(false)\n  const [editedRole, setEditedRole] = useState({})\n\n  useEffect(() => {\n    api.get(`/roles/${id}`)\n      .then(res => {\n        setRole(res.data)\n        setEditedRole(res.data)\n      })\n      .catch(() => {\n        alert('Ошибка загрузки')\n        navigate('/roles')\n      })\n  }, [id, navigate])\n\n  const handleUpdate = async () => {\n    try {\n      await api.put(`/roles/${id}`, editedRole)\n      alert('Обновлено')\n      setIsEditing(false)\n    } catch {\n      alert('Ошибка обновления')\n    }\n  }\n\n  const handleDelete = async () => {\n    if (window.confirm('Удалить эту роль?')) {\n      try {\n        await api.delete(`/roles/${id}`)\n        navigate('/roles')\n      } catch {\n        alert('Ошибка удаления')\n      }\n    }\n  }\n\n  if (!role) return <div>Загрузка...</div>\n\n  return (\n    <div style={{ maxWidth: 800, margin: '20px auto' }}>\n      <h2>Роль: {role.name}</h2>\n\n      {isEditing ? (\n        <>\n          <input\n            value={editedRole.name}\n            onChange={e => setEditedRole({ ...editedRole, name: e.target.value })}\n          />\n          <button onClick={handleUpdate}>Сохранить</button>\n          <button onClick={() => setIsEditing(false)}>Отмена</button>\n        </>\n      ) : (\n        <>\n          <p><b>Название:</b> {role.name}</p>\n          <button onClick={() => setIsEditing(true)}>Редактировать</button>\n          <button onClick={handleDelete} style={{ marginLeft: 10, color: 'red' }}>Удалить</button>\n        </>\n      )}\n\n      <br /><br />\n      <button onClick={() => navigate('/roles')}>Назад</button>\n    </div>\n  )\n}\n\nexport default RoleDetail\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}